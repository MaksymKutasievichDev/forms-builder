<div class="form_builder" cdkDropListGroup>
  <div class="styles_settings">
    <mat-accordion>
      <app-form-styles [startFormStyles]="allFormData.formStyles" (formStyles)="updateFormStyles($event)"></app-form-styles>
      <app-field-styles
        [fieldsStyles]="fieldsStyles"
        (fieldStyles)="updateFieldsStyles($event)"
        (deleteCall)="DeleteElement($event)"
        [elementTag]="allFormData.templateMap[clickedElementIndex]"
        [elementIndex]="clickedElementIndex"
      >
      </app-field-styles>
    </mat-accordion>
  </div>
  <div class="form_template__wrapper">
    <div class="form_template"
         style="border-radius: 5px"
         [ngStyle]="formStylesSelect$ | async">
      <p>{{allFormData.formStyles.hasOwnProperty('label') ? allFormData.formStyles.label : 'Form label'}}</p>
      <app-template
        class="form_template__elements"
        cdkDropList
        [cdkDropListData]="formTemplateMap$ | async"
        (cdkDropListDropped)="drop($event)"
        [formTemplateElements]="formTemplateMap$ | async"
        (clickedElementIndex)="getClickedElementIndex($event)"
        [activeElementIndex]="clickedElementIndex"
        [fieldsStyles]="fieldsStyles"
        [id]="'cdk-drop-list-0'"
      ></app-template>
    </div>
    <button (click)="saveMap()" class="isFullWidth" style="margin-top: 20px" mat-raised-button color="primary">Save</button>
  </div>
  <app-blocks
    cdkDropList
    [cdkDropListData]="formElementsList"
    [formElementsList]="formElementsList"
    (cdkDropListExited)="exited($event)"
    (cdkDropListEntered)="entered($event)"
    [cdkDropListEnterPredicate]="block"
    (cdkDropListDropped)="drop($event)"
    [id]="'cdk-drop-list-1'"
  ></app-blocks>
</div>
